<html>  
    <head>
        <title>SPT Data Quality</title>
    </head>
    <body>
        <input id="data_butt" type="button" value="Request Data" />
        <div id="date_list">Select Date<div>
        <img id="plot"></img>
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
    // when clicked, requests image from the server and replaces current image
    $("#data_butt").click(function() {
      dat = $('#date_select').val()
      $.get( "data_req", dat, function( b64_image ) {
          var old_img = document.getElementById("plot");
          old_img.parentNode.removeChild(old_img);
          var output_img = document.createElement('img');
          output_img.src = 'data:image/png;base64,'+ b64_image;
          output_img.setAttribute("id", "plot");
          document.body.appendChild(output_img);
        });
    });
    </script>
    <script>
    // populates the drop down menu of dates
    // this runs when the page is loaded
    var date_div = document.getElementById("date_list");
    var date_select = document.createElement('select');
    date_select.setAttribute("id", "date_select");
    date_div.appendChild(date_select);

    // note: do not have to decode "dates" which comes in json
    $.get("date_list", function( dates ) {
        for (var i = 0; i < dates.length; i++) {
            var option = document.createElement("option");
            option.setAttribute("value", dates[i]);
            option.text = dates[i];
            date_select.appendChild(option);
        }
    });
    </script>
</html>
