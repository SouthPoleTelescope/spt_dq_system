<html>

<head>
<title>SPT-3G Data Quality Summary</title>
<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
<script type="text/javascript" src="js/js.cookie.min.js"></script>
<script type="text/javascript" src="js/jquery-1.12.4.js"></script>
<script type="text/javascript" src="js/jquery-ui.js"></script>
<script type="text/javascript" src="js/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
<script type="text/javascript" src="js/summary.js"></script>
<style>
  .container-wafer-selector {
    display: flex;
    height: 70px;
    padding: 1%;
  }
  .container-all-figs {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    width: 100%;
  }
  .container-time-interval-selector,
  .container-time-interval-selector-wider,
  .container-figs-one-interval,
  .container-figs-one-interval-narrower {
    overflow: scroll;
    padding: 1%;
  }
  .container-time-interval-selector {
    width: 14%;
  }
  .container-time-interval-selector-wider {
    width: 20%;
  }
  .container-figs-one-interval {
    width: 86%;
  }
  .container-figs-one-interval-narrower {
    width: 80%;
  }
  .fig-with-border {
    border-width: 1px;
    border-color: rgba(0, 0, 0, 0.1);
    border-style: solid;
  }
  .field-with-border {
    border-width: 1px;
    border-color: rgba(0, 0, 0, 0.2);
  }
  h2, h3, h4 {
    font-weight: lighter;
  }
  h2 {
    font-size: 1.30em;
  }
  h3 {
    font-size: 1.15em;
  }
  h4 {
    font-size: 1.05em;
  }
  p {
    line-height: 1.4em;
  }
  code {
    font-size: 1.15em
  }
</style>
</head>

<body>
<div id="tabs">
  <ul>
    <li><a href="#tabs-summarystats">Calibration Observations</a></li>
    <li><a href="#tabs-mapswinter">Field Observations: Winter</a></li>
    <li><a href="#tabs-mapssummer">Summer</a></li>
    <li><a href="#tabs-mapssummerb">Summer-b</a></li>
    <li><a href="#tabs-mapssummerc">Summer-c</a></li>
    <li><a href="#tabs-weather">Weather Etc</a></li>
    <li><a href="#tabs-fridge">Fridge Cycles</a></li>
    <li><a href="#tabs-readme">Read Me</a></li>
  </ul>
  
  <div id="tabs-summarystats" style="padding:10px 10px 10px 10px;">
    <div class="container-wafer-selector" style="background-color:hsla(120, 100%, 75%, 0.02);">
      <form>
        <fieldset class="field-with-border">
          <legend>Wafer</legend>
          <div id="waferlist">
            <input type="radio" id="wafers-w172" name="wafers" value="w172">
            <label for="wafers-w172">w172</label>
            <input type="radio" id="wafers-w174" name="wafers" value="w174">
            <label for="wafers-w174">w174</label>
            <input type="radio" id="wafers-w176" name="wafers" value="w176">
            <label for="wafers-w176">w176</label>
            <input type="radio" id="wafers-w177" name="wafers" value="w177">
            <label for="wafers-w177">w177</label>
            <input type="radio" id="wafers-w180" name="wafers" value="w180">
            <label for="wafers-w180">w180</label>
            <input type="radio" id="wafers-w181" name="wafers" value="w181">
            <label for="wafers-w181">w181</label>
            <input type="radio" id="wafers-w188" name="wafers" value="w188">
            <label for="wafers-w188">w188</label>
            <input type="radio" id="wafers-w203" name="wafers" value="w203">
            <label for="wafers-w203">w203</label>
            <input type="radio" id="wafers-w204" name="wafers" value="w204">
            <label for="wafers-w204">w204</label>
            <input type="radio" id="wafers-w206" name="wafers" value="w206">
            <label for="wafers-w206">w206</label>
            <input type="radio" id="wafers-all" name="wafers" value="all">
            <label for="wafers-all">all</label>
          </div>
        </fieldset>
      </form>
    </div>

    <div class="container-all-figs" style="height:72vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(210, 100%, 75%, 0.01);">
        <form>
          <fieldset class="field-with-border">
            <legend>Recent</legend>
            <div id="datalist_summary_last_n">
            </div>
          </fieldset>
          <br>
          <fieldset class="field-with-border">
            <legend>Yearly</legend>
            <div id="datalist_summary_yearly">
            </div>
          </fieldset>
          <br>
          <fieldset class="field-with-border">
            <legend>Monthly</legend>
            <div id="datalist_summary_monthly">
            </div>
          </fieldset>
          <br>
          <fieldset class="field-with-border">
            <legend>Weekly</legend>
            <div id="datalist_summary_weekly">
            </div>
          </fieldset>
        </form>
      </div>
      
      <div class="container-figs-one-interval" style="background-color:hsla(280, 100%, 75%, 0.01);">
        <table style="table-layout:fixed;" cellpadding="5">
          <tr>
            <td colspan="1" class="cal_non_yearly">
              <h2><u>Calibrator</u></h2>
            </td>
            <td colspan="1" class="cal_yearly">
              <h2><u>HII Regions</u></h2>
            </td>
            <td colspan="2" align="right" valign="top">
              <div id="lastmodified_calibration">
              </div>
            </td>
          </tr>

          <tr class="cal_non_yearly">
            <td>
              <h3>Low Elevation</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_cal_response_4Hz_lowel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_cal_response_lowel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_cal_response_4Hz_lowel_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_cal_sn_4Hz_lowel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_cal_sn_lowel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_cal_sn_4Hz_lowel_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_cal_4Hz_lowel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_cal_lowel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_cal_4Hz_lowel_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>High Elevation</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_cal_response_4Hz_highel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_cal_response_highel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_cal_response_4Hz_highel_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_cal_sn_4Hz_highel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_cal_sn_highel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_cal_sn_4Hz_highel_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_cal_4Hz_highel_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_cal_highel' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_cal_4Hz_highel_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          
          <tr class="cal_non_yearly">
            <td>
              <h2><u>Elnod</u></h2>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>Response to Airmass</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_elnod_response_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_elnod_slope' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_elnod_response_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_elnod_sn_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_elnod_sn' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_elnod_sn_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_elnod_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_elnod' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_elnod_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>Sky Opacity</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_elnod_opacity_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_elnod_opacity' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_elnod_opacity_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>IQ Rotation</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_elnod_iq_phase_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_elnod_iq' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_elnod_iq_phase_all.png'>
              </a>
            </td>            
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          
          <tr class="cal_non_yearly">
            <td>
              <h2><u>HII Regions</u></h2>
            </td>
          </tr>

          <tr>
            <td>
              <h3>RCW38 Fast Point</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_rcw38_fluxcal_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_rcw38_fluxcal' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_rcw38_fluxcal_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_rcw38_intflux_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_rcw38_intflux' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_rcw38_intflux_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_rcw38_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_rcw38' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_rcw38_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>RCW38 Very Fast Point</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/rcw38_sky_transmission_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_rcw38_sky_transmission' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/rcw38_sky_transmission_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr>
            <td>
              <h3>MAT5A Fast Point</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_mat5a_fluxcal_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_mat5a_fluxcal' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_mat5a_fluxcal_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_mat5a_intflux_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_mat5a_intflux' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_mat5a_intflux_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_mat5a_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_mat5a' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_mat5a_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>MAT5A Very Fast Point</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/mat5a_sky_transmission_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_mat5a_sky_transmission' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/mat5a_sky_transmission_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr>
            <td>
              <h3>W28A2 Fast Point</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_w28a2_fluxcal_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_w28a2_fluxcal' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_w28a2_fluxcal_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_w28a2_intflux_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_w28a2_intflux' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_w28a2_intflux_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_mat5a_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_w28a2' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_w28a2_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>W28A2 Very Fast Point</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/w28a2_sky_transmission_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_w28a2_sky_transmission' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/w28a2_sky_transmission_all.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr>
            <td>
              <h3>IRAS17258 Fast Point</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_iras17258_fluxcal_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_iras17258_fluxcal' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_iras17258_fluxcal_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_iras17258_intflux_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_iras17258_intflux' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_iras17258_intflux_all.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/alive_bolos_iras17258_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_alive_bolos_iras17258' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/alive_bolos_iras17258_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr class="cal_non_yearly">
            <td>
              <h3>IRAS17258 Very Fast Point</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/iras17258_sky_transmission_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_iras17258_sky_transmission' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/iras17258_sky_transmission_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          
          <tr>
            <td>
              <h2><u>Focus Quasar</u></h2>
            </td>
          </tr>

          <tr class="cal_non_yearly">
            <td>
              <h3>Beam Properties and Bench Positions</h3>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_fwhm_vs_bench_90.png'">
                <img style="display:block;" width="100%" name='focus_fwhm_vs_bench_90' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_fwhm_vs_bench_90.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_fwhm_vs_bench_150.png'">
                <img style="display:block;" width="100%" name='focus_fwhm_vs_bench_150' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_fwhm_vs_bench_150.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_fwhm_vs_bench_220.png'">
                <img style="display:block;" width="100%" name='focus_fwhm_vs_bench_220' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_fwhm_vs_bench_220.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly">
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_ellip_vs_bench_90.png'">
                <img style="display:block;" width="100%" name='focus_ellip_vs_bench_90' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_ellip_vs_bench_90.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_ellip_vs_bench_150.png'">
                <img style="display:block;" width="100%" name='focus_ellip_vs_bench_150' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_ellip_vs_bench_150.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_ellip_vs_bench_220.png'">
                <img style="display:block;" width="100%" name='focus_ellip_vs_bench_220' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_ellip_vs_bench_220.png'>
              </a>
            </td>
          </tr>
          <tr class="cal_non_yearly"><td><br></td></tr>
          <tr>
            <td>
              <h3>Parabola Fitting Results</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_FWHM.png'">
                <img style="display:block;" width="100%" name='focus_min_fwhm' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_min_FWHM.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_BenchF.png'">
                <img style="display:block;" width="100%" name='focus_min_fwhm_bench' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_min_BenchF.png'>
              </a>
            </td>
          </tr>          
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_Ellipticity.png'">
                <img style="display:block;" width="100%" name='focus_min_ellip' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_min_Ellipticity.png'>
              </a>
            </td>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/focus_BenchE.png'">
                <img style="display:block;" width="100%" name='focus_min_ellip_bench' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/focus_min_BenchE.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>

        </table>
        
        <table style="table-layout:fixed;" cellpadding="5" class="cal_non_yearly">
          <tr>
            <td>
              <h2><u>Noise</u></h2>
            </td>
          </tr>

          <tr>
            <td>
              <h3>NET</h3>
            </td>
          </tr>
          <tr>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NET_0.1Hz_to_0.5Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_net_01Hz_to_05Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NET_0.1Hz_to_0.5Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NET_1.0Hz_to_2.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_net_1Hz_to_2Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NET_1.0Hz_to_2.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NET_3.0Hz_to_5.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_net_3Hz_to_5Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NET_3.0Hz_to_5.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NET_10.0Hz_to_15.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_net_10Hz_to_15Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NET_10.0Hz_to_15.0Hz_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr>
            <td>
              <h3>NEP</h3>
            </td>
          </tr>
          <tr>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEP_0.1Hz_to_0.5Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nep_01Hz_to_05Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEP_0.1Hz_to_0.5Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEP_1.0Hz_to_2.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nep_1Hz_to_2Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEP_1.0Hz_to_2.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEP_3.0Hz_to_5.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nep_3Hz_to_5Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEP_3.0Hz_to_5.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEP_10.0Hz_to_15.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nep_10Hz_to_15Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEP_10.0Hz_to_15.0Hz_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr>
            <td>
              <h3>NEI</h3>
            </td>
          </tr>
          <tr>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEI_0.1Hz_to_0.5Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nei_01Hz_to_05Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEI_0.1Hz_to_0.5Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEI_1.0Hz_to_2.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nei_1Hz_to_2Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEI_1.0Hz_to_2.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEI_3.0Hz_to_5.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nei_3Hz_to_5Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEI_3.0Hz_to_5.0Hz_all.png'>
              </a>
            </td>
            <td width="25%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/median_NEI_10.0Hz_to_15.0Hz_'+wafer+'.png'">
                <img style="display:block;" width="100%" name='ts_median_nei_10Hz_to_15Hz' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/median_NEI_10.0Hz_to_15.0Hz_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
        </table>
        <table style="table-layout:fixed;" cellpadding="5" class="cal_non_yearly">
          <tr>
            <td>
              <h3>Lines</h3>
            </td>
          </tr>
          <tr>
            <td width="33%">
              <a href="javascript:location.href='staticimg/'+weekdir+'/number_of_lines_found_'+wafer+'.png'">
                <img style="display:block;" width="33%" name='ts_number_of_lines' class="fig-with-border"
                     src='staticimg/plots/last_n/last_07/number_of_lines_found_all.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
        </table>
      </div>
    </div>
  </div>

  <div id="tabs-mapswinter" style="padding:10px 10px 10px 10px;">
    <div id="tabs-mapswinter-container" class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(165, 100%, 75%, 0.01);" id="time_selector_mapswinter">
      </div>

      <div class="container-figs-one-interval" style="background-color:hsla(285, 100%, 75%, 0.01);" id="figs_mapswinter">
      </div>
    </div>
  </div>
  
  <div id="tabs-mapssummer" style="padding:10px 10px 10px 10px;">
    <div id="tabs-mapssummer-container" class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(165, 100%, 75%, 0.01);" id="time_selector_mapssummer">
      </div>

      <div class="container-figs-one-interval" style="background-color:hsla(285, 100%, 75%, 0.01);" id="figs_mapssummer">
      </div>
    </div>
  </div>

  <div id="tabs-mapssummerb" style="padding:10px 10px 10px 10px;">
    <div id="tabs-mapssummerb-container" class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(165, 100%, 75%, 0.01);" id="time_selector_mapssummerb">
      </div>

      <div class="container-figs-one-interval" style="background-color:hsla(285, 100%, 75%, 0.01);" id="figs_mapssummerb">
      </div>
    </div>
  </div>

  <div id="tabs-mapssummerc" style="padding:10px 10px 10px 10px;">
    <div id="tabs-mapssummerc-container" class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(165, 100%, 75%, 0.01);" id="time_selector_mapssummerc">
      </div>

      <div class="container-figs-one-interval" style="background-color:hsla(285, 100%, 75%, 0.01);" id="figs_mapssummerc">
      </div>
    </div>
  </div>

  <div id="tabs-weather" style="padding:10px 10px 10px 10px;">
    <div class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector" style="background-color:hsla(165, 100%, 75%, 0.01);" id="time_selector_weather">
      </div>
      
      <div class="container-figs-one-interval" style="background-color:hsla(285, 100%, 75%, 0.01);" id="figs_weather">
      </div>
    </div>
  </div>
  
  
  <div id="tabs-fridge" style="padding:10px 10px 10px 10px;">
    <div class="container-all-figs" style="height:86vh;">
      <div class="container-time-interval-selector-wider" style="background-color:hsla(165, 100%, 75%, 0.01);">
        <form>
          <fieldset class="field-with-border">
            <legend>Cycles</legend>
            <div id="datalist_fridge_cycles">
            </div>
          </fieldset>
        </form>
      </div>

      <div class="container-figs-one-interval-narrower" style="background-color:hsla(285, 100%, 75%, 0.01);">
        <table style="table-layout:fixed;" cellpadding="5">
          <tr>
            <td width="100%">
              <a href="javascript:location.href='staticimg/'+cycle_dir+'/he10_full.png'">
                <img style="display:block;" width="100%" name='cycle_he10_full' class="fig-with-border" src='staticimg/arcs/figs/cycles/newest/he10_full.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr>
            <td width="100%">
              <a href="javascript:location.href='staticimg/'+cycle_dir+'/he10_half.png'">
                <img style="display:block;" width="100%" name='cycle_he10_half' class="fig-with-border" src='staticimg/arcs/figs/cycles/newest/he10_half.png'>
              </a>
            </td>
          </tr>
          <tr><td><br></td></tr>
          <tr>
            <td width="100%">
              <a href="javascript:location.href='staticimg/'+cycle_dir+'/low_temps.png'">
                <img style="display:block;" width="100%" name='cycle_low_temps' class="fig-with-border" src='staticimg/arcs/figs/cycles/newest/low_temps.png'>
              </a>
            </td>
          </tr>

        </table>
      </div>
    </div>
  </div>
  
  <div id="tabs-readme" style="height:85vh;overflow:scroll;">
    <p> Hello! Thank you for visiting the SPT-3G data quality summary webpage and for reading the documentation here.
        If you notice that the figures in any of the tabs (<i>Calibration Observations</i>, <i>Field Observations</i>, etc.)
        have not been updated for the last two days but are not aware of any issues with the operation of
        the telescope and the camera, or if you have some questions or suggestions on the webpage,
        please let Adam and Wei know.
        If you are new to this webpage and are confused by what it is, how it works, what to look at, etc.,
        please feel free to contact Wei,
        who is more than happy to give a presentation/tutorial on the contents of this webpage! </p>
    <p style="text-align:right"> (Read Me author: Wei, Last updated: 2020/12/12) </p><br>
    
    <h3> 1. Overview </h3>
    <p> This webpage is meant to be used to monitor how stable the results of various calibration observations and
        field observations have been over time, especially for the last several days. </p>
    <p> Nearly every figure in the <i>Calibration Observations</i> tab and <i>Field Observations</i> tabs
        shows the time variations of certain quantity during certain time interval.
        If the operation of the telescope and the camera was normal during that time interval,
        then the data points plotted there should show a more or less flat trend.
        The presence of any abnormal data point indicates that there was some issue with the operation,
        some unusual environmental condition, or perhaps some problem in the analysis pipeline that calculated that data point.
        Since bad weather conditions is a common cause of deteriorated data quality,
        some weather-related plots are shown in the <i>Weather Etc</i> tab,
        which may be useful when we want to know what the weather was like during certain period
        from which we see degraded data quality.
        In addition, there are some cryogenics-related plots in the <i>Fridge Cycles</i> and <i>Weather Etc</i> tabs
        that may be useful in a situation where we suspect that there are some issues with the cryostats. </p>
    <p> There are not any strict definitions on what is considered as abnormal, but, for example,
        if all the results from the observations taken during the past day or two deviate from
        the general trends over the past month by more than 50%, then that may be an indicator of some issue. </p>
    <p> Our winterovers are checking this webpage on a daily basis.
        In addition, in any given week, there should be two people in the north paying attention to the plots as well.
        (More information on the logistics of the northern data quality monitoring shift can be found in
        <a href="https://pole.uchicago.edu/spt3g/index.php/Northern_Offsite_Shift">this wiki page</a>). 
        By closely monitoring the data quality through this tool,
        we hope that any potentially serious problem will be detected early on.
        The following sections have some explanations on the figures shown in each tab. </p>
    <p> The subsequent sections have more detailed explanations on what contents each tab has. </p><br>
    
    <h3> 2. <i>Calibration Observations</i> tab </h3>
    <p> This tab mostly contains figures showing the time variations of the medians of various calibration quantities
        from different combinations of observing bands and wafers during different time intervals.
        Most of the quantities shown here are simply the ones computed by the autoprocessing pipelines,
        but some of them are separately calculated by this data quality monitoring system.
        The presence of a red triangle near either the top or bottom
        of a plot indicates that there is a data point that lies outside the range,
        and the presence of a vertical red line indicates that there is a NaN.
        All the time intervals except for those in the "Yearly" section contain the same set of figures.
        For the time intervals in the "Yearly" section, only figures related to infrequent observations are shown. </p>
    <p> If you are completely new to SPT-3G and
        have just started learning what observations we take and how we analyze their data to calibrate detectors,
        you may find
        <a href="https://pole.uchicago.edu/spt3g/index.php/File:20191016_Calibration_Procedure.pdf">this presentation</a>
        potentially useful. It is quite long but hopefully helps you understand the calibration quantities 
        shown in this tab. </p>
    <p> If you are already familiar with the calibration observations and would just like to refresh your memory,
        you may find the following resources useful:
        <a href="https://github.com/SouthPoleTelescope/spt3g_software/blob/master/calibration/README.rst">
         the documentation on calibration in the <code>spt3g_software</code> repository</a>,
        <a href="https://pole.uchicago.edu/spt3g/img_auth.php/20170718_calstatus.pdf">Nathan's slides</a>,
        <a href="https://pole.uchicago.edu/spt3g/index.php/Calibration_Pipeline">Daniel's wiki page</a>, and
        <a href="https://spt-trac.grid.uchicago.edu/trac_south_pole/wiki/CalNotesTcDontLookHere"> Tom's wiki page</a>.</p><br>
    
    <h4> 2.1. <i>Calibrator</i> section </h4>
    <p> The figures in the left column show the quantity <code>CalibratorResponse</code> computed by the autoprocessing,
        those in the center column show <code>CalibratorResponseSN</code>,
        and those in the right colunm show numbers of bolometers whose <code>CalibratorResponseSN</code> were above 20,
        which is the standard threshold used in our map-making pipeline
        to remove bolometers whose optical response was too low. </p>
    <p> Results from calibrator stares are separated according to the telescope elevation at which each stare took place.
        The figures in the first (second) row show the results from those stares that were taken
        within the range of the elevation covered in a "low-el" ("high-el") observing "day",
        in which we observe the ra0hdec-44.75 and ra0hdec-52.25 sub-fields
        (ra0hdec-59.75 and ra0hdec-67.25 sub-fields).
        Here, "low-el" and "high-el" refer to the ranges [40, 56] and [56, 72] degrees, respectively,
        and a "day" lasts for about 20 hours (fridge cycle time plus fridge hold time).
        For more information on what these "days" look like, please take a look at
        <a href="https://pole.uchicago.edu/spt3g/index.php/ObservationCadence">this wiki page</a>. </p>
    <p> (One minor complication to what is stated in the previous paragraph is that
        figures in the first row may show some results from high-el observing days as well,
        and, likewise, the figures from the second row may show some results from low-el observing days.
        This seems to be because we take a calibrator stare at the bottom elevation of a sub-field
        right before observing that field and then another calibrator stare at the top elevation
        right after finishing observing that field.
        Since the top elevation of the ra0hdec-52.25 sub-field can be slightly above 56 degrees, and
        the bottom elevation of the ra0hdec-59.75 sub-field can be slightly below 56 degrees (depending on the dither steps),
        the figures in both rows may end up showing results from both types of observing days.) </p>
    <p> The explanations above apply to the winter sub-fields but not the summer ones.
        We started to observe a different set of sub-fields in summer from the 2019/2020 austral summer
        because the winter sub-fields are contaminated by the sun during summer.
        Since the range of the elevation covered by the summer sub-fields is [21, 63],
        the definition of the "low-el" used in the first row of plots was extended from [40, 56] to [20, 56].
        For more information on the summer sub-fields, please take a look at
        <a href="https://pole.uchicago.edu/spt3g/index.php/Observing_Cadence_Summer_2019_2020">this wiki page</a>. </p>
    <p> Since we sometimes take calibrator stares with the chopper frequency set to some values higher than the standard 4 Hz
        (as part of the calibrator sweep schedules), and since the detectors' response to the calibrator
        decreases as the frequency increases, in order to avoid potential confusion caused by this frequency dependence,
        the results from only the 4 Hz calibrator stares are shown. </p><br>
    
    <h4> 2.2. <i>Elnod</i> section </h4>
    <p> The figures in the first row are similar to those shown in the <i>Calibrator</i> section.
        The figure on the left shows the medians of the quantity <code>ElnodSlopes</code> computed by the autoprocessing,
        the one in the middle shows <code>ElnodSNSlopes</code>, and the one on the right shows
        numbers of bolometers whose <code>ElnodSNSlopes</code> were larger than 20.
        Actually, the units of <code>ElnodSlopes</code> are originally [Counts/airmass],
        and we convert them to [pW/airmass] so that the numbers are hopefully easier to understand.
        Another thing to note is that, unlike <code>CalibratorResponseSN</code>, <code>ElnodSNSlopes</code> is
        by default not used to remove unresponsive bolometers in our standard map-making pipeline. </p>
    <p> The figure in the second row shows the atmospheric opacity (zenith optical depth) in each frequency band
        estimated from the aforementioned quantity <code>ElnodSlopes</code>.
        These opacity values are not computed by the autoprocessing but by this data quality monitoring system.
        The formula used to convert <code>ElnodSlopes</code> to the opacity values is based on
        <a href="https://kicp-workshops.uchicago.edu/CMB-School/resources/depot/benson__2.pdf">
         a presentation of Brad's</a> (slides 3 through 8), and the actual code used is
        <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/elnod.py#L69">
         here</a>. Basically, from <code>ElnodSlope</code> we can estimate
        how much power would be absorbed by a detector if it were pointed at the zenith.
        Then, with some rough estimate of the ambient temperature and the detector's optical efficiency,
        we can calculate the opacity of the atmosphere, or the zenith optical depth.
        There is more explanation on the zenith optical depth in section 4 below. </p>
    <p> The figure in the thrid row shows the IQ phase angle, which is given by
        <code>arctan(ElnodEigenvalueDominantVectorQ/ElnodEigenvalueDominantVectorI)</code>.
        Both the numerator and denominator are computed by the autoprocessing. </p><br>
    
    <h4> 2.3. <i>HII Regions</i> section </h4>
    <p> The figures in this section show the quantities <code>SourceFluxCalibration</code>,
        <code>SourceIntegralFlux</code>, and <code>SourceSkyTransmission</code>, where <code>Source</code>
        can be <code>RCW38</code>, <code>MAT5A</code>, <code>W28A2</code>, or <code>IRAS17258</code>.
        All three quantities are computed by the autoprocessing.
        The first two quantites are computed from fast-point observations (a.k.a. pixelrasters),
        and the last one from very-fast-point observations. <code>RCW38</code> is used to calibrate
        the data from the observations of the el0 and el1 winter sub-fields and el2 through el4 summer sub-fields,
        <code>MAT5A</code> is used for the el2 and el3 winter sub-fields and el5 summer sub-fields,
        <code>W28A2</code> is used for the el0 and el1 summer sub-field and el10 and el11 summer-b sub-field.
        <code>IRAS17258</code> replaced <code>W28A2</code> in mid-December in 2020
        as the source for el10 and el11 summer-b sub-field because W28A2 was too close to the sun.
        The locations of these sub-fields are shown in a figure in section 3 of this documentation. </p>
    <p> There are two rows of figures for each source.
        The first row shows medians of <code>FluxCalibration</code>, medians of <code>IntegralFlux</code>,
        and numbers of bolometers whose <code>FluxCalibration</code> is negative.
        As for the <code>IntegralFlux</code>, for each observation,
        one single value is calculated and assigned to all bolometers of the same band,
        so the median is simply equal to this value. The figure in the second row shows <code>SkyTransmission</code>,
        which also has just one value for each band. </p>
    <p> Fast-point observations provide the main ingredient we need
        to calibrate bolometer timestreams into the units of CMB temperature fluctuations.
        Given that these observations are taken only once in about a week,
        it is very important to make sure that the results from each fast-point do not look bad.
        This means that the medians of <code>IntegralFlux</code> and <code>FluxCalibration</code> should not look abnormal.
        In addition, the numbers of detectors whose <code>FluxCalibration</code> have negative values
        should not be much smaller than the usual ones (since <code>FluxCalibration</code> is roughly defined as
        a bolometer's peak response to the source
        (the most negative value in its map of the source expressed in some units of electrical bias power)
        divided by its reaponse to the calibrator (a positive quantity),
        this number at least needs to be negative for it to be considered as reasonable). </p><br>
    
    <h4> 2.4. <i>Focus Quasar</i> section </h4>
    <p> The figures in this section show quantities related to observations of the focus quasar (PMNJ0210-5101).
        From March 2020, we started a new schedule of focus quasar observations in which
        the source is observed with the optical bench situated at five different positions along the optical axis.
        The main purpose of this schedule is to track how the bench position that minimizes the beam width
        varies throughout a year. </p>
    <p> The autoprocessing makes a map of the source for each band from each observation,
        and the data quality monitoring system analyzes each of these maps to calculate the beam FWHM and ellipticity
        through fitting the map to a 2D Gaussian. Furthermore, for each set of five observations,
        it estimates the bench position that minimizes the FWHM and ellipticity by fitting parabolas to the data points.
        The actual code that does these things is
        <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/pmnj0210_5101.py">
         here</a>. </p>
    <p> The figures in the first two rows (not available in the "Yearly" intervals)
        show the beam properties versus the bench position for each schedule within that time interval,
        and the figures in the next two rows show the optimal bench position versus time.
        As a reference, the horizontal dashed black lines shown in the plots on the right column indicate
        the nominal bench position along the optical axis (the position we use to observe the ra0hdec-52.25 field),
        and this should change only twice a year, i.e., when we switch between the warm and cold focus positions. </p><br>
    
    <h4> 2.5. <i>Noise</i> section </h4>
    <p> The figures in the first three rows of this section show bolometers' noise levels in three different units
        (noise equivalent temperature (NET), noise equivalent power (NEP), and noise equivalent current (NEI))
        within four different frequency ranges ([0.1, 0.5], [1.0, 2.0], [3.0, 5.0], and [10.0, 15.0] Hz).
        These numbers come from the autoprocessing of the noise stares' timestreams.
        The noise levels in the lowest frequency range are more susceptible to weather than
        those in the other three ranges, and thus they are expected to show more variations. </p>
    <p> The figure in the last row shows numbers of noise lines found from noise stare timestreams.
        For each combination of band and wafer,
        the power spectral density (PSD) of each detector's timestream that belongs to that group is calculated,
        and the median PSD is obtained from these PSDs.
        Then, a line is defined as a peak in this median PSD whose value is more than twice as large as
        the median of the neighboring values within +/- 0.3 Hz from the location of the peak.
        Any line whose frequency is below 0.99 Hz is ignored.
        The actual code used to do this is located
        <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/noise.py#L108">
         here</a>. </p>
    <p> The original motivation for adding this figure was to detect early on a situation
        where timestreams suddenly start to have a lot of persistent noise lines in them.
        One instance of this situation happened between late January 2020 and early February,
        when the EHT electronics was operating, and it introduced a forest of lines into our timestreams.
        Unfortunately, this way of detecting lines is susceptible to bad weather conditions.
        When the weather is bad, the median PSDs are noisier than usual and tend to have a lot of fluctuations
        below a few Hz. As a result, some of the peaks in these fluctuations are flagged as "lines",
        which go away once the weather improves.
        Therefore, whenever you notice there were several noise stares
        from which a large number of lines were found (indicated by the red triangles),
        but you also know that the weather was bad during that period, then these lines are probably not worrisome.
        However, if the weather was nominal, then this may be an indication of some issue. </p><br>
    
    <h4> 2.6. Figures for individual observations </h4>
    <p> In every figure shown in the <i>Calibration Observations</i> tab,
        one observation's results are reduced to one data point (for each observing band and/or wafer).
        If you are interested in checking the details of the results from one particular observation,
        say, the distribution of <code>CalibratorResponse</code> from a particular calibrator stare,
        you may find the <a href="http://spt3g-dq.grid.uchicago.edu/">per-observation plotter</a> useful.
        Instructions on how to use this webpage can be found in
        <a href="https://pole.uchicago.edu/spt3g/img_auth.php/20190513_hackathon_dq.pdf">Adam's slides</a>.</p><br>
    
    <h3> 3. <i>Field Observations</i> tabs </h3>
    <p> In these tabs (<i>Winter</i>, <i>Summer</i>, <i>Summer-b</i>, and <i>Summer-c</i>),
        for each time interval listed on the left,
        you can find figures showing co-added maps from that interval
        and figures showing time variations of several map-related quantities such as map noise level during the same interval.
        In the latter type of figures, one data point corresponds to one observation of a sub-field.
        The yearly intervals actually have different types of figures, which are explained in the following sections. </p>
    <p> If you are new to SPT-3G and unfamiliar with how we take field observations and make CMB maps,
        hopefully there is someone in your institution whom you can ask questions to...
        Of course, Wei is happy to talk about the quantities plotted here as well! </p>
    <p> For the <i>Winter</i> tab, most of the figures have the notations
        el0, el1, el2, and el3 in their legends and/or titles, 
        and these are simply shorthands for the
        ra0hdec-44.75, ra0hdec-52.25, ra0hdec-59.75, and ra0hdec-67.25 sub-field, respectively.
        As for the <i>Summer</i> tab, figures related to the observations taken during the 2019-2020 austral summer
        have the notations el0, el1, el2, el3, el4, and el5, which correspond to
        the ra5hdec-24.5, ra5hdec-31.5, ra5hdec-38.5, ra5hdec-45.5, ra5hdec-52.5, and ra5hdec-59.5 sub-field, respectively.
        Within this same tab, figures related to the observations taken during the 2020-2021 austral summer
        will have the notations el10, el11, el20, and el21, which correspond to
        the ra5hdec-29.75, ra5hdec-33.25, ra5hdec-36.75, and ra5hdec-40.25 sub-field.
        When combined together, the new el10 and el11 sub-field correspond to the old el1 sub-field,
        and the new el20 and el21 sub-field correspond to the old el2 sub-field.
        As for the notations used in the <i>Summer-b</i> tab and those that will be used in the <i>Summer-c</i> tab,
        please see
        <a href="https://pole.uchicago.edu/spt3g/index.php/Observing_Cadence_Summer_2020_2021">this wiki page</a>.
        The figure below shows the locations of all these sub-fields.
        Please note that the numbers used in the title (for the area of each field) are approxmations. <br><br>
        <img style="width:800px;height:866px;"
             src="readmeimg/all_fields.png"><br></p><br>
    
    <h4> 3.1. <i>Maps</i> section </h4>
    <p> The figures in the first row show co-added temperature maps from each of the three observing bands.
        The lower and upper limits of the color bars are determined
        in different ways for different types of time intervals. </p>
    <p> For the Recent and Weekly time intervals,
        a map, which has 0.25 arcminute resolution, is first smoothed with a 1.0 arcminute FWHM Gaussian,
        and then the 1st and 99th percentile values in the smoothed map are used as the
        lower and upper limits of the color bar, respectively. The smoothing is done because, if the original map,
        which has 18000 by 12000 pixels (for the 1500d winter field), is shown in an image that has about 1500 by 1000 pixels,
        the map in the resultant image seems to look too noisy to serve any useful purposes such as
        revealing some strange features if they exist. </p>
    <p> For the Yearly and Monthly time intervals, a co-add does not look noisy enough in the resultant image to require
        smoothing, so that processing is not done.
        As for the color bar limits, they are determined not directly from the actual values in a map but from expectations.
        The expectations are based on a model that the variance of the values in a map is equal to
        the variance from the noise plus the variance from the signal. While the former should be
        inversely proportional to the number of maps added together, the latter should be a constant.
        From a typical noise variance, an educated guess for the signal variance, the number of maps added together,
        and this model, an expected variance is calculated for a co-add,
        and the color bar limits are set to be +/- 2.5 times the corresponding standard deviation. </p>
    <p> The figure below shows an example of how the expected variance of a co-add is determined.
        The blue data points show how the variance in a 2019 co-added 95GHz map of the ra0hdec-44.75 sub-field map changed
        everytime two new maps were added to the co-add,
        and the orange data points show how the variance of the corresponding co-added noise map changed
        everytime the same two new maps were added but with the opposite signs.
        The blue box, whisker, and caps in the lower left corner show a distribution of
        variances of individual maps divided by two. The blue and orange curves are the results of curve fittings
        to the data points, and the models used in the fittings are shown in the legend. <br><br>
        <a href="javascript:location.href='readmeimg/90GHz-T_map_variances_of_signals_and_noises_in_ra0hdec-44.75.png'">
          <img class="fig-with-border" style="width:500px;height:300px;"
               src="readmeimg/90GHz-T_map_variances_of_signals_and_noises_in_ra0hdec-44.75.png">
        </a><br><br>
        The median of the blue distribution is used as the typical noise variance mentioned in the previous paragraph,
        and the asymptote of the blue curve is used as the educated guess for the signal variance.
        These fittings are done for each observing band and each sub-field, and all of these results are
        taken into account when an expected variance of a full-field co-add is calculated. </p>
    <p> The figures in the second row show co-added TT weight maps. The lower and upper limits of a color bar
        in this type of figures simply correspond to the minimum and maximum of the values in a weight map, respectively.
        The figures in the third row show cross sections of these weight maps along the vertical line
        that passes the center RA of the map, and the values are typically normalized to
        the weight at around the most negative declination.
        Along with the actual data, expected cross sections are
        also shown, which are based on a simple model that the weight of a pixel is proportional to the amount of time
        the telescope spends on staring at the area of the sky corresponding to that pixel.
        Since our scans have the same duration and cover the same range of RA regardless of declination
        (or the telescope elevation), the time spent on a pixel is
        inversely proportional to cosine of the declination of that pixel. This time spent is also proportional to
        the number of observations that covered that pixel. As a result, the expected cross section shown in a figure is
        basically equal to secant of declination multiplied by a discontinuous integer-valued function
        representing the number of observations of each sub-field. </p><br>
    
    <h4> 3.2. <i>Fluctuations in Maps</i> section </h4>
    <p> For non-yearly time intervals, there are two rows of figures in this section. The first row shows noise levels,
        and the second row shows averages of TT weights of individual observations.
        The noise level of a temperature map is defined here as
        the average of square root of the autospectrum of the map in the ell range [3000, 5000].
        In order to save time and reduce memory usage, only the pixels within a small patch of the sky
        located around the center of a sub-field are used for calculating the noise.
        These small patches do contain bright point sources, which are masked during the calculations. As for calculating
        an average value from a TT weight map, the peripheral regions of the map
        where weights sharply decrease toward zero and the pixels corresponding to point sources are both ignored.
        The figures below show the masks generated from the list
        <code>spt3g_software/sources/1500d_ptsrc_3band_50mJy.txt</code>
        for the central region of each of the winter sub-field and
        the effect of masking the sources on the autospectrum calculation
        (the maps shown here are not from co-adds but just from some random single-observation maps).
        The reason the masking makes a much bigger difference for the ra0hdec-52.25 sub-field seems to be because
        the point sources in that sub-field are much brighter. </p>
    <table style="table-layout:fixed;" cellpadding="5">
      <tr>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/central_region_of_ra0hdec-44.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/central_region_of_ra0hdec-52.25.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/central_region_of_ra0hdec-59.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/central_region_of_ra0hdec-67.25.png">
        </td>
      </tr>
      <tr>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/mask_used_for_ra0hdec-44.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/mask_used_for_ra0hdec-52.25.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/mask_used_for_ra0hdec-59.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/mask_used_for_ra0hdec-67.25.png">
        </td>
      </tr>
      <tr>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/effect_of_mask_on_tt_spectrum_calculation_for_ra0hdec-44.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/effect_of_mask_on_tt_spectrum_calculation_for_ra0hdec-52.25.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/effect_of_mask_on_tt_spectrum_calculation_for_ra0hdec-59.75.png">
        </td>
        <td>
          <img style="display:block;" width="100%"
               src="readmeimg/effect_of_mask_on_tt_spectrum_calculation_for_ra0hdec-67.25.png">
        </td>
      </tr>
    </table>
    <p> For yearly time intervals, there are three rows of figures in this section. The second row shows histograms of the
        noise levels of individual temperature maps, which is a complementary way of visualizing the data shown
        in the non-yearly time intervals. The third row shows histograms of the averages of individual weight maps. 
        In these figures, the mode, median (MED), and median absolute deviation (MAD) of each histogram are printed. <p>
    <p> The first row is somewhat unique; it shows the time evolution of the noise levels of the running year-to-date
        co-added temperature maps. The data points shown there are calculated as follows: existing maps are separated
        into two groups to form two co-adds, and newly made maps are alternately added to one of these two co-adds; then,
        whenever both co-adds have the same number of maps, their weights are removed, the difference between the two is
        taken, and noise is calculated from the difference map after it is divided by two. This procedure is somewhat
        similar to making a co-add by alternately adding and subtracting maps, which is how the x-axis label got its name.
        The noise levels in the running year-to-date co-adds are expected to be inversely proportional to square root of
        the number of maps used, which is why log-log plots are used here, and also results from linear least squares
        fitting to the logarithm of the data are shown. The title of each figure also indicates
        how many maps were excluded from the co-adds. The excluded maps, if any, are typically those maps
        that have anomalously large weights, which can affect the co-adds significantly if included.
        For the thresholds used to determine whether a map has an unreasonably large weight,
        please see <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/fields_coadding.py#L3056">this dictionary</a>. </p><br>
    
    <h4> 3.3. <i>Pointing</i> section </h4>
    <p> For non-yearly time intervals, time variations of discrepancies between measured positions and true possitions
        of three bright point sources from each sub-field are shown. The measured positions are results of 2D Gaussian
        fittings to small map regions around the sources, and the true positions are from the ATCA20G catalog.
        For example, the image below shows the locations of the point sources used for the winter sub-fields. <br><br>
        <a href="javascript:location.href='readmeimg/locations_of_bright_sources.png'">
          <img style="width:750px;height:450px;"
               src="readmeimg/locations_of_bright_sources.png">
        </a></p>
    <p> The signal-to-noise ratios of these sources are smaller in 220 GHz maps than in 95 and 150 GHz,
        but the ratios are similar in 95 GHz and 150 GHz.
        Of the twelve sources used for the winter sub-fields,
        the brightest one is in the ra0hdec-52.25 sub-field and has SNR of a few hundreds.
        The dimmest one is in the ra0hdec-67.25 sub-field and has SNR of about 15. The other ten sources' SNRs are
        roughly in the range between 25 and 70 (SNR here is defined as the peak value of a source divided by
        the standard deviation of the sub-field map to which the source belongs, and point sources are masked
        when the standard deviation is calculated).
        For the complete list of all the sources used for all the sub-fields,
        please see <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/fields_coadding.py#L953">this dictionary</a>. </p>
    <p> For non-yearly time intervals, for each sub-field,
        there is one set of figures for RA offsets and one for Dec offsets. In each figure,
        along with the offsets from the three sources, the average offset of these three sources is also shown.
        For yearly time intervals, there are two figures showing distributions of the averages. </p><br>
    
    <h4> 3.4. <i>Completeness of Observations</i> section </h4>
    <p> This section exists for non-yearly time intervals only.
        The first row shows average numbers of bolometers that were not flagged and thus used for map-making,
        numbers of bolometers that were flagged and removed from map-making,
        and numbers of bolometers that were flagged for different reasons.
        The map-making pipeline does bolometer flagging on a scan-by-scan basis,
        so here an average number refers to the average over all scans of an observation.
        Since one bolometer can be flagged for different reasons, 
        the sum of the average numbers of bolometers flagged by individual reasons
        exceed the average number of total removed bolometers (the red crosses) for each observation.
        As for the numbers of removed bolometers, most of them are just those bolometers that
        we do not attempt to tune to begin with. This can be seen from the more or less constant levels of "BadHK".
        Thus, the figures do not indicate that there are typically about one thousand
        bolometers from each band that were initially tuned successfully but later produced bad data during observing. </p>
    <p> The figures in the second row show fractions of pixels in TT weight maps that have nominal weights.
        The nominal weight for each sub-field is defined as roughly
        30% of the average weight of a typical weight map from that sub-field.
        For the exact values used, please see <a href="https://github.com/SouthPoleTelescope/spt_dq_system/blob/master/summaryplot/fields_coadding.py#L837">this dictionary</a>.</p>
    <p> The figure in the third row shows the duration of each observation
        as recorded in the observation frame found in the raw data (timestreams) files.
        This figure also happens to show our observing cadence in a colorful way. The printed observing efficiency is
        calculated by dividing the total observation duration from that time interval by
        the length of the entire interval. </p><br>
    
    <h4> 3.5. <i>Temperature Calibration</i> section </h4>
    <p> For a non-yearly time interval, there are four rows of figures in this section. The first row compares
        the temperature calibration of each of our maps against that of Planck's maps. Specifically,
        for each temperature map, the average ratio of two spectra in the ell range [750, 1250] is calculated;
        the numerator is the cross spectrum between a T map of ours and the Planck's full mission map,
        and the denominator is the cross spectrum between one of Planck's half mission map and the other half mission map.
        If our temperature calibration is reasonably close to that of Planck's, this ratio should be close to 1.0.
        Since this calculation is not sophisticated enough
        to apply corrections due to the beams, filtering transfer functions etc.,
        how close the numbers are to 1.0 is perhaps not a very meaningful aspect to pay attention to.
        However, the figures should still be useful to catch those maps that have abnormal calibration.
        Like the noise calculations, in order to save time and memory usage,
        only the small regions around the cetners of the sub-fields are used for these cross spectrum calculations
        (points sources are masked as well). The figure below shows an example of calculating this ratio.
        The SPT map used here is not a co-add but just a random single-observation map. <br><br>
        <img class="fig-with-border" style="width:500px;height:300px;"
             src="readmeimg/spt_cross_planck_spectra.png"></p>
    <p> The second and third rows show by how much bolometers' response to the calibrator vary
        as the telescope elevation changes. As part of the schedule to observe a sub-field, we take a calibrator stare
        at the bottom elevation of that field before observing it and then take another calibrator stare at the top elevation
        of that field after observing it. From the autoprocessed results of these two calibrator stares,
        the percentage change in the quantity <code>CalibratorResponse</code> at the top of the field with respect to
        the bottom is calculated for each bolometer. Then, the figures in the second row show the median percentage change
        from all bolometers of each observing band, and the figures in the third row show the median from each wafer and
        each observing band. </p>
    <p> The figures in the fourth row show the conversion factors we use to calibrate bolometers' timestreams
        from some units of power into the temperature of CMB fluctuations.
        The median value of pW/K from each wafer is shown. A pW/K conversion factor is
        equal to the product of <code>CalibratorResponse</code>, <code>FluxCalibration</code>, <code>IntegralFlux</code>,
        and <code>SkyTransmission</code> divided by some constant. If a figure here shows that
        certain observation had abnormal pW/K conversion factors, you may be able to find out which of the four factors
        led to the abonrmality by checking the figures in the <i>Calibration Observations</i> tab. </p>
    <p> For a yearly time interval, there are two rows of figures in this section. The first row shows histograms of
        the ratios of the cross spectra, and the second row shows the median percentage changes in bolometers' response to
        the calibrator. </p><br>
    
    <h3> 4. <i>Weather Etc</i> tab </h3>
    <p> When we see some anomalous data points in the figures shown in
        the <i>Calibration Observations</i> and <i>Field Observations</i> tabs,
        one question that may come to our mind is "How was the weather like during that time interval?".
        The contents in this tab are meant to help us answer that question. <p>
    <p> The <i>Tipper</i> section shows the atmospheric brightness and opacity measured by the submillimeter tipper
        (please check <a href="https://arxiv.org/abs/1602.08795">this paper</a> to see how the instrument works).
        As we can see from equation (4) in the paper, the atmospheric emission depends on the product of the two factors
        <i>&tau;</i>, zenith optical depth, and <i>A</i>, airmass.
        The reason the optical depth is given the units of inverse airmass in the middle plot is
        to reflect the the fact that the optical depth and airmass should result in a unitless quantity
        when multiplied together because the product is the exponent of the exponential function,
        but hopefully the units are not causing unnecessary confusion...
        This section also has a copy of the figure
        from the <i>Callibration Observations</i> tab that shows our elnod-derived optical depth. <p>
    <p> The <i>Weather Station</i> section shows the various quantities measured by our own weather station.
        Both the tipper and our weather station are installed near the telescope.
        In addition, there are figures showing the temperature measured by
        various thermometers installed in the receiver cabin and the cryostats.
        These may not be that useful, but it probably should not hurt to have them... </p><br>
    
    <h3> 5. <i>Fridge Cycles</i> tab </h3>
    <p> This tab contains figures showing the temperatue of various parts of the He sorption fridge during each fridge cycle.
        The plots you get from the "newest" radio button are identical to the plots you get from the button right below it.
        These plots will hopefully be useful in case we see some degraded performance of the fridge. </p><br>
    
    <h3> 6. Code and data products </h3>
    <p> All the relevant scripts that work together to make this webpage run are located in the
        <code>spt_dq_system</code> repository. <code>db_server.js</code> is the Java script that starts a server
        that serves this webpage. It calls the python script <code>update_summary.py</code> periodically to
        update the figures shown in this webpage. When <code>update_summary.py</code> is invoked, it in turn calls the
        scripts in the <code>spt_dq_system/summaryplot</code> directory that do the actual work of updating
        relevant data products and figures. </p>
    <p> This updating actually happens only at Pole; the data products, such as pickle files storing the medians of the
        calibration quantities, g3 files storing co-added maps and analysis results, and pickle files storing weather-related data extracted from the ARC files
        are updated automatically and periodically only at Pole.
        As for the calibration observations, the pickle files are transferred to Amundsen/Scott and stored in
        <code>/spt/data/rsync/spt_dq_data/</code>. Then, the figures are made from these pickles in the north. Therefore, if you'd like to plot the calibration-related quantities in a different way for certain debugging purpose, you could load the data from these pickles and make your own plots.
        As for the field observations, though, the g3 files are not transferred due to their sizes;
        it is only the figures that are transferred, which are located in
        <code>/spt/data/rsync/spt_dq_maps_figures/</code>. <p>
    <p> However, there is a test version
        (<a href="http://amundsen.grid.uchicago.edu:5000/summary.html">http://amundsen.grid.uchicago.edu:5000/summary.html</a>, 
        same Username and Password) of the webpage running on Amundsen.
        Even though the updating for the "Field Observations" tabs is only done occasionally for this version,
        the g3 files are made on Amundsen and thus readily accessible to
        anyone in the north who is interested in using them. They are located in
        <code>/sptlocal/user/weiquan/map_quality/hi_res_maps/</code> (for winter sub-fields) and
        <code>/sptlocal/user/weiquan/map_quality/hi_res_maps_summer*/</code> (for summer sub-fields). As for the "Weather Etc" and "Fridge Cycles" tabs, we are also only transferrig the figures, which are stored in <code>/spt/data/rsync/spt_dq_arcs_figs</code>. </p><br>
    
    <h3> 7. Finally... </h3>
    <p> Thank you again for reading the documentation. If you have any questions on anything written here,
        please let Wei know! </p><br>
  </div>

</div>
</body>

</html>

